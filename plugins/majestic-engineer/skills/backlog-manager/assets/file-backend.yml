backend: file
directory: docs/todos/
template: assets/backlog-template.md

naming:
  pattern: "{issue_id}-{status}-{priority}-{description}.md"
  issue_id: "Sequential number (001, 002, 003...) - never reused"
  status: [pending, ready, complete]
  priority: [p1, p2, p3]
  description: "kebab-case, brief description"

frontmatter:
  required:
    - status
    - priority
    - issue_id
  optional:
    - tags
    - dependencies

operations:
  next_id:
    command: "ls docs/todos/ | grep -o '^[0-9]\\+' | sort -n | tail -1 | awk '{printf \"%03d\", $1+1}'"

  create:
    steps:
      - "Determine next issue ID"
      - "Copy template: cp assets/backlog-template.md docs/todos/{ID}-pending-{priority}-{description}.md"
      - "Fill required sections: Problem Statement, Acceptance Criteria"
      - "Add initial Work Log entry"

  list:
    by_priority: "ls docs/todos/*-p1-*.md"
    by_status: "ls docs/todos/*-{status}-*.md"
    by_tag: "grep -l 'tags:.*{tag}' docs/todos/*.md"
    unblocked: "grep -l 'dependencies: \\[\\]' docs/todos/*-ready-*.md"
    count: |
      for status in pending ready complete; do
        echo "$status: $(ls -1 docs/todos/*-$status-*.md 2>/dev/null | wc -l)"
      done

  update:
    triage:
      - "Rename file: mv {file}-pending-{pri}-{desc}.md {file}-ready-{pri}-{desc}.md"
      - "Update frontmatter: status: pending â†’ status: ready"
      - "Fill Recommended Action section"

  complete:
    steps:
      - "Verify Acceptance Criteria items"
      - "Update Work Log with final session"
      - "Rename: mv {file}-ready-{pri}-{desc}.md {file}-complete-{pri}-{desc}.md"
      - "Update frontmatter: status: complete"
      - "Commit: feat: resolve issue {ID}"

dependencies:
  check_blockers: "grep '^dependencies:' docs/todos/{ID}-*.md"
  find_blocked_by: "grep -l 'dependencies:.*\"{ID}\"' docs/todos/*.md"

work_log:
  format: |
    ### YYYY-MM-DD - Session Title

    **By:** Claude Code / Developer Name

    **Actions:**
    - Specific changes made (include file:line references)
    - Commands executed

    **Learnings:**
    - What worked / what didn't
    - Patterns discovered
